---
layout: single
title:  "SPRING_DI"
categories: 
    - FRAMEWORK
tags: 
    - [2022-04, WEB, SPRING, BACKEND, FRAMEWORK]
sidebar:
    nav: "docs"
---

# ğŸ“š <a style="color:#00adb5">SPRING</a>

<center>
<img width="90%" src="./../../images/spring.png">
</center>
<br>

# ğŸ“š <a style="color:#00adb5">Dependency Injection ( ì˜ì¡´ì„± ì£¼ì… )</a>

## <a style="color:#00adb5">Bean</a>
Spring Beanì€ ê¸°ë³¸ì ìœ¼ë¡œ *Singleton* ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì»¨í…Œì´ë„ˆê°€ ì œê³µí•˜ëŠ” ëª¨ë“  ë¹ˆì˜ instanceëŠ” ë™ì¼í•˜ë‹¤.<br>
ì»¨í…Œì´ë„ˆê°€ í•­ìƒ ìƒˆë¡œìš´ instanceë¥¼ ë°˜í™˜í•˜ê²Œ ë§Œë“¤ê³  ì‹¶ì„ ê²½ìš° scopeë¥¼ *prototype* ìœ¼ë¡œ ì„¤ì •í•´ì•¼í•œë‹¤.

```java
@Service("memberService")
@Scope("singleton")
public class MemberServiceImpl implements MemberService{

    @Override
    public int registerMember(MemberDto memberDto){
        return 0;
    }
}
```
xml bean ì„¤ì • ( prototype )
```xml
<bean id="memberService" class="com.test.hello.service2.MemberServiceImpl" scope="prototype"/>
```
<br>
Beanì˜ ìƒì„± ë²”ìœ„ ì§€ì •

- singleton
    - spring container ë‹¹ í•˜ë‚˜ì˜ instance beanë§Œ ìƒì„± (default)
- prototype
    - containerì— beanì„ ìš”ì²­í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ instance ìƒì„±
- request
    - HTTP Requestë³„ë¡œ ìƒˆë¡œìš´ instance ìƒì„±
- session
    - HTTP Sessionë³„ë¡œ ìƒˆë¡œìš´ isntance ìƒì„±

<br>
bean ë©”íƒ€ ì •ë³´ì˜ í‘œí˜„ ë°©ì‹ì—ëŠ” XML Document, Annotation, Java Code ê°€ ìˆëŠ”ë° ì´ê²ƒë“¤ì„ í†µí•´ BeanDefinition meta dataê°€ ë˜ì–´ IoC Containerì— ì „ì†¡ëœë‹¤.<br>
<br>

## <a style="color:#00adb5">Spring Bean</a> ì„¤ì •

### <a style="color:#00adb5">XML</a>
- XMLë¬¸ì„œ í˜•íƒœë¡œ ë¹ˆì˜ ì„¤ì • ë©”íƒ€ ì •ë³´ë¥¼ ê¸°ìˆ 
- <bean> íƒœê·¸ë¥¼ í†µí•´ì„œ ì„¸ë°€í•œ ì œì–´ ê°€ëŠ¥
<br>

*servlet-context.xml*
```xml
<bean id="memberDao" class="com.test.hello.dao.MemberDaoImpl" />

<bean id="memberService" class="com.test.hello.service2.MemberServiceImpl" scope="prototype" >
    <property name="memberDao" ref="memberDao" />
</bean>
```

### <a style="color:#00adb5">Annotation</a>
- ì–´í”Œë¦¬ì¼€ì´ì…˜ ê·œëª¨ê°€ ì»¤ì§€ê³  ë¹ˆì˜ ê°œìˆ˜ê°€ ë§ì•„ì§ˆ ìˆ˜ë¡ XML íŒŒì¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ë²ˆê±°ë¡­ë‹¤.
- íŠ¹ë³„í•œ annotationì„ ë¶€ì—¬í•´ ì£¼ë©´ ìë™ìœ¼ë¡œ ë¹ˆ ë“±ë¡ì´ ê°€ëŠ¥í•˜ë‹¤.
- "ì˜¤ë¸Œì íŠ¸ ë¹ˆ ìŠ¤ìºë„ˆ" ë¡œ "ë¹ˆ ìŠ¤ìºë‹"ì„ í†µí•´ ìë™ ë“±ë¡í•œë‹¤.
    - ë¹ˆ ìŠ¤ìºë„ˆëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í´ë˜ìŠ¤ ì´ë¦„ì„ ë¹ˆì˜ ì•„ì´ë””ë¡œ ì‚¬ìš©
    - ì •í™•íˆëŠ” í´ë˜ìŠ¤ ì´ë¦„ì˜ ì²« ê¸€ìë§Œ ì†Œë¬¸ìë¡œ ë°”ê¾¼ ê²ƒì„ ì´ìš©
<br>

```java
@Service
public class MemberServiceImpl implements MemberService{

    // annotationì„ ì‚¬ìš©í•œ ë¹ˆ ë“±ë¡ ( Autowired )
    @Autowired
    private MemberDao memberDao;

    @Override
    public int registerMember(MemberDto memberDto){
        return memberDao.registerMember(memberDto);
    }
}
```

<a style="color:red"><strong>Annotationìœ¼ë¡œ ë¹ˆì„ ì„¤ì •í•  ê²½ìš° ë°˜ë“œì‹œ component-scanì„ ì„¤ì •í•´ì•¼ í•œë‹¤.</strong></a><br>
servlet-context.xml

```xml
<context:component-scan base-package="com.test.hello.*" />
```

<br>
- Stereotype annotation ì¢…ë¥˜
    - ë¹ˆ ìë™ë“±ë¡ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” annotation
    - ë¹ˆ ìë™ì¸ì‹ì„ ìœ„í•œ annotationì´ ì—¬ëŸ¬ê°€ì§€ì¸ ì´ìœ 
        - ê³„ì¸µë³„ë¡œ ë¹ˆì˜ íŠ¹ì„±ì´ë‚˜ ì¢…ë¥˜ë¥¼ êµ¬ë¶„
        - AOP Pointcut í‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ë©´ íŠ¹ì • annotationì´ ë‹¬ë¦° í´ë˜ìŠ¤ë§Œ ì„¤ì • ê°€ëŠ¥
        - íŠ¹ì • ê³„ì¸µì˜ ë¹ˆì— ë¶€ê°€ ê¸°ëŠ¥ ë¶€ì—¬
<br>
<table>
    <tr>
        <td>Stereotype</td>
        <td>ì ìš© ëŒ€ìƒ</td>
    </tr>
    <tr>
        <td><a style="color:red"><strong>@Repository</strong></a></td>
        <td>Data Access Layerì˜ DAO ë˜ëŠ” Repository í´ë˜ìŠ¤ì— ì‚¬ìš©<br>
            DataAccessException ìë™ë³€í™˜ê³¼ ê°™ì€ AOPì˜ ì ìš© ëŒ€ìƒì„ ì„ ì •í•˜ê¸° ìœ„í•´ ì‚¬ìš©
        </td>
    </tr>
    <tr>
        <td><a style="color:red"><strong>@Service</strong></a></td>
        <td>Service Layerì˜ í´ë˜ìŠ¤ì— ì‚¬ìš©</td>
    </tr>
    <tr>
        <td><a style="color:red"><strong>@Controller</strong></a></td>
        <td>Presentation Layerì˜ MVC Controllerì— ì‚¬ìš©<br>
            ìŠ¤í”„ë§ ì›¹ ì„œë¸”ë¦¿ì— ì˜í•´ ì›¹ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ë¹ˆìœ¼ë¡œ ì„ ì •
        </td>
    </tr>
     <tr>
        <td>@Component</td>
        <td>ìœ„ì˜ Layer êµ¬ë¶„ì„ ì ìš©í•˜ê¸° ì–´ë ¤ìš´ ì¼ë°˜ì ì¸ ê²½ìš°ì— ì„¤ì •</td>
    </tr>   
</table>